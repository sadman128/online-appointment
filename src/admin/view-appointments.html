<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>View Appointments</title>
  <link rel="stylesheet" href="../style.css"> <!-- External CSS Link -->
  <style>
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #d0e6ff;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #007bff;
      color: white;
    }
    select {
      padding: 4px;
    }
  </style>
</head>
<body>
<div class="login-container" style="width: 1000px">
  <h2>My Appointments</h2>
  <table id="appointmentsTable">
    <thead>
    <tr>
      <th>Appointment ID</th>
      <th>Doctor</th>
      <th>Patient</th>
      <th>Date</th>
      <th>Time</th>
      <th>Status</th>
    </tr>
    </thead>
    <tbody></tbody>
  </table>
  <button onclick="location.href='dashboard.html'">Back to Dashboard</button>
</div>

<script>
  fetch(`/admin/appointments`)
          .then(res => res.json())
          .then(data => {
            const tbody = document.querySelector('#appointmentsTable tbody');
            if (!data || data.length === 0) {
              tbody.innerHTML = '<tr><td colspan="6">No appointments found.</td></tr>';
              return;
            }

            data.forEach(app => {
              const row = document.createElement('tr');
              row.innerHTML = `
         <td>${app.id}</td>
          <td>${app.doctor_username}</td>
          <td>${app.patient_username}</td>
          <td>${app.formattedDate}</td>
          <td>${app.formattedTime}</td>
          <td>${app.status}</td>
        `;
              tbody.appendChild(row);
            });
          })
          .catch(err => {
            console.error('Error fetching appointments:', err);
          });
</script>
</body>
</html>
